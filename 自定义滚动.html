<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>自定义滚动条</title>
	<link rel="stylesheet" href="../../css/reset.css">
<!-- 	<link rel="stylesheet" href="../css/index.css"> -->
	<style>
		.box {
			position: relative;
			width: 600px;
			height: 20px;
			margin: 0 auto;
			background: #ccc;
		}
		.scrollbar {
			position: absolute;
			left: 0;
			top: 0;
			width: 60px;
			height: 20px;
			background: #39f;
			cursor: pointer;
		}
		.con {
			overflow-x: auto;
			margin: 0 auto;
			width: 600px;
			height: 100px;
			border: 1px solid #f00;
		}
		.texts {
			width: 900px;
			height: 100px;
			background: #ccf;
		}
	</style>
</head>
<body>
	<div class="box" id="box">
		<div class="scrollbar" id="scrollbar"></div>
	</div>
	<div class="con" id="con">
		<div class="texts" id="texts">
			<p>首先，多属性的运动逻辑与单一属性运动逻辑不同。单一属性是判断当前属性到达终点即清除计时器，而多属性，是要求判断所有的属性均抵达终点才可以清除计时器。
1、需要一个变量，用于辅助我们的判断是否需要清除计时器
2、在一次运动开始时，初始化一个值，为true。之后针对每个属性实现“本次运动”。在运动之后需要判断这个属性的属性值是否达到了终点，如果没有达到终点，则将初始化的值设为false
3、当所有的属性运算、赋值完毕之后，方可判断是否要清除计时器（清除计时器的代码需要在for-in语句的外面）

链式运动(回调函数)
基本功能：在一个运动完成之后再执行下一个运动，
核心知识：回调函数
有助于后期理解jQuery框架</p>

		</div>
	</div>

	<script>
		var scrollbar = document.getElementById('scrollbar');
		var box = document.getElementById('box');
		var texts = document.getElementById('texts');
		var oldX = 0;          
		var newX = 0;			
		var nowDisX = 0;
		box.onmousedown = function(e) {
			oldX = e.clientX;
			nowDisX = scrollbar.offsetLeft;
			document.onmousemove = function(e) {
				e.preventDefault();
				newX = e.clientX;  		
				var nowX = nowDisX + newX - oldX;
				var maxX = box.clientWidth - scrollbar.offsetWidth;
					//边界控制
					if (nowX <= 0) {
						nowX = 0;
					};
					if (nowX >= maxX) {
						nowX = maxX;
					};
					con.scrollbarLeft = nowX / maxX * (texts.clientWidth - con.offsetWidth);
					scrollbar.style.left = nowX + 'px';	
					texts.scrollLeft = con.scrollbarLeft;		
			//nowX / maxX = texts.clientWidth - con.offsetWidth/
			}
		}

		document.onmouseup = function() {
			document.onmousemove = null;
		}
	</script>
</body>
</html>
